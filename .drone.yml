pipeline:
  build:
    image: java:8u91-jdk
    commands:
      - ./gradlew build
    when:
      branches: [ master, development, pull/* ]
      event: [ push, tag ]

  publish:
      image: plugins/docker
      repo: eltesoftwaretechnology/admin-backend
      dockerfile: Dockerfile
      secrets: [ docker_username, docker_password ]
      auto_tag: true